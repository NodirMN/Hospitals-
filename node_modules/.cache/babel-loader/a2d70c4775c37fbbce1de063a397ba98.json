{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\hospitalreact-main\\\\src\\\\pages\\\\rooms.js\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport Table from \"../component/table\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Rooms = () => {\n  _s();\n\n  const [isForm, setForm] = useState(false);\n  const [data, setData] = useState([]);\n  const [departs, setDeparts] = useState([]);\n  const option = {\n    id: 'ID',\n    name: 'Xona raqami',\n    type: 'Turi',\n    floor: 'Qavat',\n    depart: 'Bo`lim',\n    status: 'Xona xolati'\n  };\n  useEffect(() => {\n    axios.get('http://localhost:3000/departs').then(res => {\n      if (res.status === 200) {\n        setDeparts(res.data);\n      }\n    });\n    axios.get('http://localhost:3000/rooms').then(res => {\n      if (res.status === 200) {\n        setData(res.data);\n      }\n    });\n  }, []);\n\n  const addRoom = e => {\n    e.preventDefault();\n    let form = document.forms.room;\n    let room = {};\n    let formData = new FormData(form);\n    formData.forEach((value, key) => {\n      room[key] = value;\n    });\n    axios.post('http://localhost:3000/rooms', room).then(res => {\n      if (res.status === 201) {\n        setData([...data, res.data]);\n        form.reset();\n      }\n    });\n  };\n\n  const deleteRoom = id => {\n    const index = data.findIndex(el => el.id === id);\n    axios.delete(`http://localhost:3000/rooms/${id}`).then(res => {\n      if (res.status === 200) {\n        const before = data.slice(0, index);\n        const after = data.slice(index + 1);\n        setData([...before, ...after]);\n      }\n    });\n  };\n\n  const parseDate = data => {\n    data = data.map(room => {\n      const index = departs.findIndex(dep => dep.id = room.depart);\n      if (departs[index]) room.depart = departs[index].name;\n      return room;\n    });\n    return data;\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Xonalar ro'yhati\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      data: parseDate(data),\n      option: option,\n      url: \"rooms\",\n      del: id => {\n        deleteRoom(id);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"addbtn\",\n      onClick: () => {\n        setForm(true);\n      },\n      children: \"+\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      name: \"room\",\n      className: isForm ? 'add show' : 'add',\n      onSubmit: event => {\n        addRoom(event);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"add__close\",\n        onClick: () => {\n          setForm(false);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"add__title\",\n        children: \"Yangi xona qo'shish\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"name\",\n        placeholder: \"Xona raqami\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"type\",\n        required: true,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Xona turi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Muolaja xonasi\",\n          children: \"Muolaja xonasi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Shifokor xonasi\",\n          children: \"Shifokor xonasi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Ta`minot xonasi\",\n          children: \"Ta`minot xonasi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Dam olish xonasi\",\n          children: \"Dam olish xonasi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"floor\",\n        placeholder: \"Qavat\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"depart\",\n        required: true,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          selected: true,\n          disabled: true,\n          children: \"Bo'limni tanlang\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }, this), departs.map(dep => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: dep.id,\n          children: dep.name\n        }, dep.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"status\",\n        required: true,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          selected: true,\n          disabled: true,\n          children: \"Xona xolatini belgilang\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Bo`sh\",\n          children: \"Bo`sh\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Band\",\n          children: \"Band\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Remont\",\n          children: \"Remont\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Qo'shish\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Rooms, \"bJFiOBAkHsjAcB0UwimXXSehCUk=\");\n\n_c = Rooms;\nexport default Rooms;\n\nvar _c;\n\n$RefreshReg$(_c, \"Rooms\");","map":{"version":3,"sources":["C:/Users/User/OneDrive/Рабочий стол/hospitalreact-main/src/pages/rooms.js"],"names":["axios","React","useEffect","useState","Table","Rooms","isForm","setForm","data","setData","departs","setDeparts","option","id","name","type","floor","depart","status","get","then","res","addRoom","e","preventDefault","form","document","forms","room","formData","FormData","forEach","value","key","post","reset","deleteRoom","index","findIndex","el","delete","before","slice","after","parseDate","map","dep","event"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,oBAAlB;;;;AAEA,MAAMC,KAAK,GAAG,MAAK;AAAA;;AACf,QAAM,CAACC,MAAD,EAASC,OAAT,IAAoBJ,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAM,CAACK,IAAD,EAAOC,OAAP,IAAkBN,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACO,OAAD,EAAUC,UAAV,IAAwBR,QAAQ,CAAC,EAAD,CAAtC;AAEA,QAAMS,MAAM,GAAG;AACXC,IAAAA,EAAE,EAAE,IADO;AAEXC,IAAAA,IAAI,EAAE,aAFK;AAGXC,IAAAA,IAAI,EAAE,MAHK;AAIXC,IAAAA,KAAK,EAAE,OAJI;AAKXC,IAAAA,MAAM,EAAE,QALG;AAMXC,IAAAA,MAAM,EAAE;AANG,GAAf;AASAhB,EAAAA,SAAS,CAAC,MAAI;AACVF,IAAAA,KAAK,CAACmB,GAAN,CAAU,+BAAV,EACCC,IADD,CACMC,GAAG,IAAI;AACT,UAAIA,GAAG,CAACH,MAAJ,KAAe,GAAnB,EAAuB;AACnBP,QAAAA,UAAU,CAACU,GAAG,CAACb,IAAL,CAAV;AACH;AACJ,KALD;AAMAR,IAAAA,KAAK,CAACmB,GAAN,CAAU,6BAAV,EACCC,IADD,CACMC,GAAG,IAAI;AACT,UAAIA,GAAG,CAACH,MAAJ,KAAe,GAAnB,EAAuB;AACnBT,QAAAA,OAAO,CAACY,GAAG,CAACb,IAAL,CAAP;AACH;AACJ,KALD;AAOH,GAdQ,EAcP,EAdO,CAAT;;AAkBA,QAAMc,OAAO,GAAEC,CAAD,IAAK;AACfA,IAAAA,CAAC,CAACC,cAAF;AACA,QAAIC,IAAI,GAAGC,QAAQ,CAACC,KAAT,CAAeC,IAA1B;AACA,QAAIA,IAAI,GAAG,EAAX;AACA,QAAIC,QAAQ,GAAG,IAAIC,QAAJ,CAAaL,IAAb,CAAf;AACAI,IAAAA,QAAQ,CAACE,OAAT,CAAiB,CAACC,KAAD,EAAOC,GAAP,KAAa;AAC1BL,MAAAA,IAAI,CAACK,GAAD,CAAJ,GAAYD,KAAZ;AACH,KAFD;AAGAhC,IAAAA,KAAK,CAACkC,IAAN,CAAW,6BAAX,EAAyCN,IAAzC,EACCR,IADD,CACMC,GAAG,IAAI;AACT,UAAIA,GAAG,CAACH,MAAJ,KAAe,GAAnB,EAAuB;AACnBT,QAAAA,OAAO,CAAC,CAAC,GAAGD,IAAJ,EAAUa,GAAG,CAACb,IAAd,CAAD,CAAP;AACAiB,QAAAA,IAAI,CAACU,KAAL;AACH;AACJ,KAND;AAOH,GAfD;;AAiBA,QAAMC,UAAU,GAAGvB,EAAD,IAAM;AACpB,UAAMwB,KAAK,GAAG7B,IAAI,CAAC8B,SAAL,CAAeC,EAAE,IAAGA,EAAE,CAAC1B,EAAH,KAAUA,EAA9B,CAAd;AACAb,IAAAA,KAAK,CAACwC,MAAN,CAAc,+BAA8B3B,EAAG,EAA/C,EACCO,IADD,CACMC,GAAG,IAAI;AACT,UAAIA,GAAG,CAACH,MAAJ,KAAe,GAAnB,EAAuB;AACnB,cAAMuB,MAAM,GAAGjC,IAAI,CAACkC,KAAL,CAAW,CAAX,EAAaL,KAAb,CAAf;AACA,cAAMM,KAAK,GAAInC,IAAI,CAACkC,KAAL,CAAWL,KAAK,GAAC,CAAjB,CAAf;AACA5B,QAAAA,OAAO,CAAC,CAAC,GAAGgC,MAAJ,EAAY,GAAGE,KAAf,CAAD,CAAP;AACH;AACJ,KAPD;AAQH,GAVD;;AAYA,QAAMC,SAAS,GAAIpC,IAAD,IAAU;AAExBA,IAAAA,IAAI,GAAGA,IAAI,CAACqC,GAAL,CAASjB,IAAI,IAAI;AACpB,YAAMS,KAAK,GAAG3B,OAAO,CAAC4B,SAAR,CAAkBQ,GAAG,IAAIA,GAAG,CAACjC,EAAJ,GAASe,IAAI,CAACX,MAAvC,CAAd;AACA,UAAIP,OAAO,CAAC2B,KAAD,CAAX,EACIT,IAAI,CAACX,MAAL,GAAcP,OAAO,CAAC2B,KAAD,CAAP,CAAevB,IAA7B;AACJ,aAAOc,IAAP;AACH,KALM,CAAP;AAMA,WAAOpB,IAAP;AACH,GATD;;AAWA,sBACI;AAAA,4BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI,QAAC,KAAD;AACI,MAAA,IAAI,EAAEoC,SAAS,CAACpC,IAAD,CADnB;AAEI,MAAA,MAAM,EAAEI,MAFZ;AAGI,MAAA,GAAG,EAAC,OAHR;AAII,MAAA,GAAG,EAAGC,EAAD,IAAM;AAACuB,QAAAA,UAAU,CAACvB,EAAD,CAAV;AAAe;AAJ/B;AAAA;AAAA;AAAA;AAAA,YAFJ,eAQI;AACI,MAAA,SAAS,EAAC,QADd;AAEI,MAAA,OAAO,EAAE,MAAI;AAACN,QAAAA,OAAO,CAAC,IAAD,CAAP;AAAc,OAFhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YARJ,eAaI;AACI,MAAA,IAAI,EAAC,MADT;AAEI,MAAA,SAAS,EAAED,MAAM,GAAC,UAAD,GAAY,KAFjC;AAGI,MAAA,QAAQ,EAAGyC,KAAD,IAAS;AAACzB,QAAAA,OAAO,CAACyB,KAAD,CAAP;AAAe,OAHvC;AAAA,8BAKI;AACI,QAAA,SAAS,EAAC,YADd;AAEI,QAAA,OAAO,EAAE,MAAI;AAACxC,UAAAA,OAAO,CAAC,KAAD,CAAP;AAAe;AAFjC;AAAA;AAAA;AAAA;AAAA,cALJ,eASI;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cATJ,eAYI;AACI,QAAA,IAAI,EAAC,QADT;AAEI,QAAA,IAAI,EAAC,MAFT;AAGI,QAAA,WAAW,EAAC,aAHhB;AAII,QAAA,QAAQ;AAJZ;AAAA;AAAA;AAAA;AAAA,cAZJ,eAkBI;AAAQ,QAAA,IAAI,EAAC,MAAb;AACI,QAAA,QAAQ,MADZ;AAAA,gCAGI;AAAQ,UAAA,KAAK,EAAC,EAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHJ,eAII;AAAQ,UAAA,KAAK,EAAC,gBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJJ,eAKI;AAAQ,UAAA,KAAK,EAAC,iBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALJ,eAMI;AAAQ,UAAA,KAAK,EAAC,iBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBANJ,eAOI;AAAQ,UAAA,KAAK,EAAC,kBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAPJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAlBJ,eA2BI;AACI,QAAA,IAAI,EAAC,QADT;AAEI,QAAA,IAAI,EAAC,OAFT;AAGI,QAAA,WAAW,EAAC,OAHhB;AAII,QAAA,QAAQ;AAJZ;AAAA;AAAA;AAAA;AAAA,cA3BJ,eAiCI;AACI,QAAA,IAAI,EAAC,QADT;AAEI,QAAA,QAAQ,MAFZ;AAAA,gCAII;AAAQ,UAAA,KAAK,EAAC,EAAd;AAAiB,UAAA,QAAQ,MAAzB;AAA0B,UAAA,QAAQ,MAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJJ,EAKKG,OAAO,CAACmC,GAAR,CAAYC,GAAG,iBACZ;AAEI,UAAA,KAAK,EAAEA,GAAG,CAACjC,EAFf;AAAA,oBAISiC,GAAG,CAAChC;AAJb,WACSgC,GAAG,CAACjC,EADb;AAAA;AAAA;AAAA;AAAA,gBADH,CALL;AAAA;AAAA;AAAA;AAAA;AAAA,cAjCJ,eA+CI;AACI,QAAA,IAAI,EAAC,QADT;AAEI,QAAA,QAAQ,MAFZ;AAAA,gCAII;AAAQ,UAAA,KAAK,EAAC,EAAd;AAAiB,UAAA,QAAQ,MAAzB;AAA0B,UAAA,QAAQ,MAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJJ,eAKI;AAAQ,UAAA,KAAK,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALJ,eAMI;AAAQ,UAAA,KAAK,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBANJ,eAOI;AAAQ,UAAA,KAAK,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAPJ;AAAA;AAAA;AAAA;AAAA;AAAA,cA/CJ,eAwDI;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAxDJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAbJ;AAAA,kBADJ;AA0EH,CAlJD;;GAAMR,K;;KAAAA,K;AAoJN,eAAeA,KAAf","sourcesContent":["import axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport Table from \"../component/table\";\n\nconst Rooms = () =>{\n    const [isForm, setForm] = useState(false)\n    const [data, setData] = useState([])\n    const [departs, setDeparts] = useState([])\n\n    const option = {\n        id: 'ID',\n        name: 'Xona raqami',\n        type: 'Turi',\n        floor: 'Qavat',\n        depart: 'Bo`lim',\n        status: 'Xona xolati',\n    }\n\n    useEffect(()=>{\n        axios.get('http://localhost:3000/departs')\n        .then(res => {\n            if (res.status === 200){\n                setDeparts(res.data)\n            }\n        })\n        axios.get('http://localhost:3000/rooms')\n        .then(res => {\n            if (res.status === 200){\n                setData(res.data)\n            }\n        })\n        \n    },[])\n\n    \n\n    const addRoom=(e)=>{\n        e.preventDefault()\n        let form = document.forms.room \n        let room = {}\n        let formData = new FormData(form)\n        formData.forEach((value,key)=>{\n            room[key] = value \n        })\n        axios.post('http://localhost:3000/rooms',room)\n        .then(res => {\n            if (res.status === 201){\n                setData([...data, res.data])\n                form.reset()\n            }\n        })\n    }\n\n    const deleteRoom =(id)=>{\n        const index = data.findIndex(el=> el.id === id)\n        axios.delete(`http://localhost:3000/rooms/${id}`)\n        .then(res => {\n            if (res.status === 200){\n                const before = data.slice(0,index)\n                const after  = data.slice(index+1)\n                setData([...before, ...after])\n            }\n        })\n    }\n\n    const parseDate = (data) => {\n        \n        data = data.map(room => {\n            const index = departs.findIndex(dep => dep.id = room.depart)\n            if (departs[index])\n                room.depart = departs[index].name\n            return room\n        })\n        return data\n    }\n\n    return (\n        <>\n            <h1>Xonalar ro'yhati</h1>\n            <Table \n                data={parseDate(data)} \n                option={option} \n                url='rooms'\n                del={(id)=>{deleteRoom(id)}}\n            />\n            <button \n                className=\"addbtn\" \n                onClick={()=>{setForm(true)}}>\n                    +\n            </button>\n            <form \n                name='room'\n                className={isForm?'add show':'add'}\n                onSubmit={(event)=>{addRoom(event)}}\n                >\n                <span \n                    className=\"add__close\" \n                    onClick={()=>{setForm(false)}}>\n                </span>\n                <div className=\"add__title\">\n                    Yangi xona qo'shish\n                </div>\n                <input \n                    type='number' \n                    name=\"name\" \n                    placeholder=\"Xona raqami\"\n                    required\n                />\n                <select name=\"type\"\n                    required\n                >\n                    <option value=''>Xona turi</option>\n                    <option value='Muolaja xonasi'>Muolaja xonasi</option>\n                    <option value='Shifokor xonasi'>Shifokor xonasi</option>\n                    <option value='Ta`minot xonasi'>Ta`minot xonasi</option>\n                    <option value='Dam olish xonasi'>Dam olish xonasi</option>\n                </select>\n                <input \n                    type='number' \n                    name='floor' \n                    placeholder='Qavat'\n                    required\n                />\n                <select \n                    name=\"depart\"\n                    required\n                    >\n                    <option value='' selected disabled>Bo'limni tanlang</option>\n                    {departs.map(dep=>(\n                        <option \n                            key={dep.id}\n                            value={dep.id}\n                            >\n                                {dep.name}\n                        </option>\n                    ))}\n                </select>\n                <select \n                    name=\"status\"\n                    required\n                    >\n                    <option value='' selected disabled>Xona xolatini belgilang</option>\n                    <option value='Bo`sh'>Bo`sh</option>\n                    <option value='Band'>Band</option>\n                    <option value='Remont'>Remont</option>\n                </select>\n                <button type=\"submit\">Qo'shish</button>\n            </form>\n        </>\n    )\n}\n\nexport default Rooms"]},"metadata":{},"sourceType":"module"}